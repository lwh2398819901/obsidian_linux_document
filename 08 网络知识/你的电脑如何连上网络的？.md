```toc
```
<font color=#81B300>该内容有chatgpt参与创作，可靠性不予保证</font>

引用：[鸟哥私房菜服务器篇](https://linux.vbird.org/)  推荐一下鸟哥私房菜，很适合初学者。

## 前言
我们现在对于一台电脑联网好像是家常便饭，默认一台电脑就应该联网，最多的就是知道将网线或者连接上无线网卡。

但实际上，联网是一个比较复杂的过程，其中背后到底是怎么回事？我想通过这篇文章用通俗易懂的方式进行讲解。

尽量不涉及到过多的名词与解释，用非专业技术人员的方式 进行一次全面的科普。

<span style="background:#A0CCF6">当然 真实原因是我也不是多么了解，只能用目前自己理解的内容讲解一下，如有错误请指出，多谢！</span>

那么首先我们先来认识一些设备：
- 集线器（Hub）是用于构建局域网（LAN）的网络设备，它用于将多个网络设备连接在一起，以便进行数据传输。它通常具有多个端口，每个端口都可以连接一个设备，并且它不对数据进行任何处理或过滤，只是简单地将收到的数据广播到其他所有连接的设备。集线器在网络发展早期起到了重要作用，它是最早用于构建局域网的设备之一。然而，随着技术的进步，集线器被交换机（Switch）所替代，因为交换机具有更高的性能和更多的功能。与集线器相比，交换机更智能、更高效。交换机具有自学习功能，它能够识别连接的设备的MAC地址，并根据需要将数据包仅发送给目标设备，而不是广播到所有设备。这提高了网络的效率，并减少了网络中的冲突和碰撞。因此，现在集线器的使用已经大为减少。它在一些特定的场景下可能仍然有用，例如在小型网络中进行简单连接测试或故障排除。但在大多数企业和家庭网络中，交换机取代了集线器，成为更可靠且性能更好的选择。


- 交换机：交换机（Switch）是一种常见的网络设备，用于在局域网（LAN）中连接多台计算机和其他网络设备，实现数据的交换和转发。交换机主要工作在数据链路层，并根据设备的MAC地址进行数据包转发。 但是家庭中一般用不到，一般只会在公司内部局域网中使用。


- 路由器（Router）：路由器是连接您的设备到互联网的关键设备，其功能包括将光猫转换的网络信号分发给家庭中的各个设备。路由器提供了内部局域网（LAN）和外部广域网（WAN）之间的链接，并允许多个设备同时使用互联网。


- 光猫（Optical Network Terminal，ONT）：光猫是将宽带光信号转换为电信号的设备。它一般由网络运营商提供，在家庭或办公室内的光纤入户处安装。光猫通过光纤与光通信网络相连，然后通过以太网或Wi-Fi等方式与用户设备连接。


- 网卡/无线网卡（MAC）：网卡（Network Interface Card，NIC），也称为网络适配器或网卡适配器，是一种用于将计算机连接到计算机网络的硬件设备。网卡负责在计算机和网络之间传输数据，实现计算机与网络之间的通信。每个网卡都有一个唯一的物理地址，称为MAC地址（Media Access Control Address）。MAC地址是由厂商提前分配的，并且用于标识网卡在网络中的唯一性。

以上的内容 都是chatgpt帮我回答的，说实话，我看都不想看。 出现的这些东西到底是啥？什么是lan,什么又是wan?
光猫后面的wan和lan是啥？为什么光猫和路由器长得这么像啊？
## 设备介绍
### 集线器
集线器，我还是在鸟哥私房菜服务器篇看到这个东西，大体介绍一下就是：\
如果你的ip地址设置好后，那么所有连接到集线器的设备都可以<font color=#FF0000>互相通信</font>。怎么通信呢？广播，所有发给集线器的数据会被广播给集线器的所有端口。
假如A设备发送数据，那么所有连接在集线器的设备都会收到，只是其他设备收到数据后看到发送的地址不是发送给自己的，就会主动丢弃掉数据。

这玩意我看到第一眼就觉得，十分的，傻叉！浪费资源。（不只是傻叉，还不安全，假如我在某个端口上监听，因为所有的流量最终会广播到所有端口，那么其实我可以将所有的流量都复制下来进行解析的。）

第二就是容易堵塞，为什么呢？因为他内部是通的，所以假如A数据在线路上传输至C时，此时B数据也想通过线路传输至C，那么二者就会阻塞其中一个，也就是发生了碰撞。


<span style="background:#A0CCF6">下面引自鸟哥私房菜服务器篇，很不错的书，推荐！</span>

这是集线器的网络架构图
![[Pasted image 20230629153632.png]]
>集线器是一种<font color=#FF0000>网络共享媒体</font>，什么是网络共享媒体啊？想象一下上述的环境就像一个十字路口，而集线器就是那个路口！ 这个路口一次只允许一辆车通过，如果两辆车同时使用这个路口，那么就会发生碰撞的车祸事件啊！那就是所谓的共享媒体。 也就是说，网络共享媒体在单一时间点内， 仅能被一部主机所使用。


<span style="background:#A0CCF6">几个书中的小问题，我觉得很有意思也摘录下来：</span>
1.  问：网络忙碌时，集线器信号灯闪个不停，但我的主机明明没有使用网络
>答：根据上述可以知道不管哪一部主机发送出数据，所有的计算机都会接收到！因为集线器会复制一份该数据给所有计算机。 因此，虽然只有一部主机在对外联机，但是在集线器上面的所有计算机信号灯
>就都会闪个不停！
>
2. 问：我的计算机明明没有被入侵，为何我的数据会被隔壁的计算机窃取：
>答：透过上述的流程，我们只要在 B 计算机上面安装一套监听软件，这套软件将原本要丢弃的讯框数据捉下来分析，并且加以重组， 就能够知道原本 A 所送出的讯息了。这也是为什么我们都建议重要数据在因特网上面得要『加密』后再传输！

ps:抓包的方式可以使用工具 Wireshark,tcpdump等  抓包库可以使用libpcap, 该库支持mac/linux/windows平台，具体可以查看[官网](https://www.tcpdump.org/)。


3. 问：共享媒体只有一个主机可以使用，为何大家可以同时上网：
>答：这个问题就有趣了，既然共享媒体一次只能被一个主机所使用，那么万一我传输100MB 的档案，集线器就得被我使用 80 秒 (以 10Mbps 传输时)，在这期间其他人都不可以使用吗？不是的，由于标准的ip数据在网络卡与其他以太网络媒体一次只能传输 1500bytes，因此我的 100MB 档案就得要拆成多个小数据报，然后一个一个的传送，每个数据报传送前都要经过 CSMA/CD 的机制。 所以，这个集线器的使用权是大家抢着用的！即使只有一部主机在使用网络媒体时，那么这部主机在发送每个封包间， 也都是需要等待一段时间的 (96 bit time)！



集线器可能解决了早起互通互联的问题，但是缺点也是无法忍受的，有没有一种设备，可以独享自己的通路呢？有，交换机！

## 交换机

![[Pasted image 20230628164059.png]]


让我们来看一下光猫长什么样子吧。
正面
![[Pasted image 20230628162632.png]]
背面
![[Pasted image 20230628162528.png]]

现在的光猫很多都带着路由器的功能，也就是路由器和光猫一体化了。

但是忽略这个一体化，正常来说光猫的路由器效果并不理想，基本上都会使用光猫+路由器的组合。
看一下路由器的样子
![[Pasted image 20230628163223.png]]
你可以看到有一个网线接口被单独的涂成了蓝色，一般那个口下面会写着一个WAN  代表的是广域网。
剩下的几个没有颜色的 可以理解为交换机的功能。

首先看一下图片，忽略掉那些杂七杂八的，我们现在家庭一般用的都是光纤，也就是说，首先光猫能够连接光纤。而光纤也就是运营商（联通、电信、移动）入户联网的地方。

简单将，我们所有的网络都是通过光纤进行传递的。
下面是一个简单的架构图

![[Pasted image 20230628162953.png]]



